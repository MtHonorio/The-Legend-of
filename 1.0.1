#include <stdio.h>
#include <string.h>
#include <ctype.h>
#include <time.h>
#include <unistd.h>
#include <stdlib.h>


#define s 99//9999 //FUNÇÃO UNSLEEP (Tira as barras para voltar ao normal)

int indiferenca, paiProtetor=0, ansiedade=0, respInt;
char Nome[10];
char aspas = '"';
//ANSIEDADE = PREFERIU FAZER TAL ATIVIDADE
//INDIFERENTE = DEIXOU DE RESPONDER
//PAIPROTETOR
int NaoBuscouIrmao = 0; //BUSCOU O IRMAO
int avisar=0; //AVISOU QUE ASHA ESTAVA A PROCURA DE TRITSKA
void EndChap1(){
system("cls");
printf("\n\t\t CAPITULO I: \n");
printf("\n");
  if(ansiedade==0) printf("\t Voce nao respondeu a Dalia sobre o que queria ver primeiro.\n");
  else{
  printf("\t Voce disse para Dalia que queria ver\n");
  if(ansiedade==1) printf("\t  o Campeonato de Cavalaria primeiro.\n");
  if(ansiedade==2) printf("\t  o Campeonato de Arquearia primeiro.\n");
  if(ansiedade==3) printf("\t  o Duelo de Espadachins primeiro.\n");
  if(ansiedade==4) printf("\t  a Comunhao primeiro.\n"); }


  if(paiProtetor!=0) printf("\t Voce alertou a seu pai sobre os filhos de Wangeryoran .\n");

  if(NaoBuscouIrmao == 1) printf("\n\t Voce desistiu de ir buscar seu irmao.\n");
  if(NaoBuscouIrmao == 0) printf("\n\t Voce foi ao Rio vermelho e buscou seu irmao.\n");

  if(avisar == 1) printf("\n\t Voce deu o aviso de Asha para Tritska.\n");

  if(indiferenca == 0) {printf("\n\t Voce respondeu todas as vezes.\n");}
  if(indiferenca > 1) {printf("\n\t Voce deixou de responder %d vezes", indiferenca);}
  if(indiferenca == 1){printf("\n\t Voce deixou de responder %d vez", indiferenca);}
  printf("%d", indiferenca);


  printf("\n\n\n\n\t The Legend of %s\n", Nome);
  printf("\t Um jogo por Matheus Honorio, Diego Luis e Miguel Elias");
  printf("\n\t Graduandos em Eng. de Computacao, Centro de Informatica - UFPB\n\n\n\n\n ");
}




int SW1 (int respPrimeiraPergunta){

    int respInt;

        switch(respPrimeiraPergunta){//SWITCH PARA CHECAR SE O JOGADOR ESTÁ ANSIOSO OU NÃO
            case 1:

            printf("\n Dalia:\n - Sim, mas o que vai querer ver primeiro?\n\n"); usleep(s); usleep(s);
            printf(" 1 - Campeonato de Cavalaria\n 2 - Campeonato de Arquearia\n 3 - Duelo de Espadachins\n 4 - A Comunhao\n ? - ...\n ");
            fflush(stdin);
            scanf("%d", &respInt);
            system("cls"); usleep(s);


                switch(respInt){ //SWITCH PARA CASO O JOGADOR ESTEJA ANSIOSO

                            //SE ELE ESTÁ ANSIOSO:
                            case 1:
                            usleep(s); usleep(s);
                            printf("\n Dalia:\n- Os duelos sao bem mais emocionantes...\n Eu queria ter uma espada, nao um cavalo.\n"); usleep(s); usleep(s);
                            printf("\n (Dalia vai lembrar de sua escolha no dia...)\n");
                            ansiedade=1;
                            break;
                            case 2:
                            printf("\n Dalia:\n- Com a tua mira? - Ela comecou a rir. - Mas eu queria uma\n espada, nao um arco, acho que eu me daria bem com uma espada.\n"); usleep(s); usleep(s);
                            printf("\n (Dalia vai lembrar de sua escolha no dia...)\n");
                            ansiedade=2;
                            break;
                            case 3:
                            printf("\n Dalia:\n - A Lady Guida vai fatiar o Mestre Odwin esse ano.\n"); usleep(s); usleep(s);
                            printf("\n (Dalia vai lembrar de sua escolha no dia...)\n");
                            ansiedade=3;
                            break;
                            case 4:
                            printf("\n Dalia:\n- Ah, e a segunda coisa que estou mais ansiosa. Soube que os Ulvin\n vao preparar um bolo para todos esse ano, nao so pros Valkron.\n"); usleep(s); usleep(s);
                            printf("\n (Dalia vai lembrar de sua escolha no dia...)\n");
                            ansiedade=4;
                            break;
                            default:
                            printf("\n Dalia:\n - Nao quer falar comigo, entendi...\n"); usleep(s); usleep(s);
                            printf("\n (Dalia vai lembrar disso...)\n");
                            indiferenca++;
                            break;
                            }
                            break;
                            //SE ELE NÃO ESTÁ ANSIOSO:
                            case 2:
                            usleep(s); usleep(s);
                            printf("\n Dalia:\n - Ah, mas eu estou. Voce nao tem ideia do que eh esperar um ano para ver\nLady Guida e o Mestre Odwin duelando.\n"); usleep(s); usleep(s);
                            printf("\n (Dalia vai lembrar disso...)\n");
                            ansiedade=0;
                            break;

                            //SE ELE É INDIFERENTE:
                            default:
                                printf("\n Dalia:\n - Nao quer falar comigo, entendi...\n"); usleep(s); usleep(s);
                                printf("\n (Dalia vai lembrar disso...)\n");
                                indiferenca++;

            } //FIM DO SWITCH
        return 0;
}

int SW2(int respInt){
    int respInt2;

    switch(respInt){
                    case 2:
                    default:
                        usleep(s); usleep(s);
                        printf("\n Setvik:\n - VENHA AQUI AGORA. NAO ESTA ME OUVINDO?"); usleep(s); usleep(s);
                        indiferenca++;
                        printf("\n\n O grito foi tao alto que Hanne e Dalia se espantaram.\n\n");usleep(s); usleep(s);
                        printf(" 1 - Ir ate ele\n 2 - Ir ate ele\n ? - Ir ate ele\n  ");
                        fflush(stdin);
                        scanf("%*d");
                        system("cls");
                        usleep(s); usleep(s);
                        printf(" Setvik:\n - Voce pode fazer um favor?\n");



                    break;
                    case 1:
                        usleep(s); usleep(s);
                        system("cls");
                        printf("\n Setvik:\n - Como foi seu dia?\n\n"); usleep(s); usleep(s);
                        printf(" 1 - Foi legal\n 2 - Foi um saco\n ? - ...\n  ");
                        fflush(stdin);
                        scanf("%d", &respInt2);
                        system("cls");
                        switch (respInt2){
                            case 1:
                            printf(" %s:\n", Nome);
                            printf(" - Foi legal. Aprendi que a febre vem das maldicoes que os Ioruns nos jogam\n"); usleep(s); usleep(s);
                            printf(" para roubar nossa energia espiritual, e que as doencas sao causadas por\n"); usleep(s); usleep(s);
                            printf(" por pequenos animaizinhos que escapam do exilio pra nos prejudicar.\n"); usleep(s); usleep(s);
                            printf("\n Setvik:\n - Isso mesmo! Por isso, mantenha-se longe do exilio.\n");usleep(s); usleep(s);
                            printf("\n Voce pode fazer um favor?\n");usleep(s); usleep(s);
                            break;

                            case 2:
                            printf(" %s:\n", Nome);
                            printf(" - Foi um saco.  Os filhos de Wangeryoran continuam implicando comigo.\n"); usleep(s); usleep(s);
                            printf("\n Setvik:\n - Nao se preocupe. Vou resolver isso com o Wangeryoran");;usleep(s); usleep(s);
                            printf("\n (Setvik vai lembrar disso...)\n\n");usleep(s); usleep(s);
                            printf(" Voce pode fazer um favor?\n");usleep(s); usleep(s);
                            paiProtetor++;
                            break;

                         default:
                         indiferenca++;
                         printf("\n Setvik:\n - Por que o silencio?"); usleep(s); usleep(s);
                         printf("\n Os filhos de Wangeryoran continuam implicando com voce, certo?"); usleep(s); usleep(s);
                         printf("\n Nao se preocupe. Vou resolver isso com o Wangeryoran.");usleep(s); usleep(s);
                         printf("\n (Setvik vai lembrar disso...)\n\n");usleep(s); usleep(s);
                         printf("\n Voce pode fazer um favor?\n");usleep(s); usleep(s);
                         paiProtetor++;

                        }

                        usleep(s); usleep(s);
            }
    return 0;
}

int SW3(int respInt){
    int respInt2;
    switch(respInt){
    case 1:
        printf("\n Hotnor:\n - Vai querer milho como sempre? Mais verde ou maduro?\n ");usleep(s); usleep(s);
        printf("\n\n 1 - Dizer que na verdade voce esta procurando Otskel e Yurin\n ? - Dizer que na verdade voce esta procurando Otskel e Yurin\n  ");
        fflush(stdin);
        scanf("%*d");
        usleep(s); usleep(s);
        printf("\n Hotnor:\n -  Eles foram ate o Rio Vermelho com Tristska, mas ainda nao voltaram. \n");
        Lot2();
        RioVermelho();
        break;
    case 2:
         printf("\n Hotnor:\n - Tudo bem, entao. Se precisar de algo me avisa.");
         printf("\n\n 1 - Continuar procurando sozinho\n 2 - Dizer que na verdade voce esta procurando Otskel e Yurin\n ? - Continuar procurando sozinho\n  ");
         fflush(stdin);
         scanf("%d", &respInt2);
         usleep(s); usleep(s);
         switch(respInt2){
            case 1:
                ProcurarSozinho();
                break;
            case 2:
               printf("\n Hotnor:\n -  Eles foram ate o Rio Vermelho com Tristska, mas ainda nao voltaram. ");
               Lot2();
               RioVermelho();
                break;

            default:
                ProcurarSozinho();
                break;
                }



         break;

    default:

            while(respInt2 != 2 || respInt2 != 1){
            indiferenca++;
            printf("\n Hotnor:\n - Voce sempre tao calado. Procura pelo seu irmao?\n  ");
            printf("\n\n 1 - Sim\n 2 - Nao\n  ");
            fflush(stdin);
            scanf("%d", &respInt2);

                switch(respInt2){
            case 1:
                printf("\n Hotnor:\n -  Eles foram ate o Rio Vermelho com Tristska, mas ainda nao voltaram.\n ");
                break;
            case 2:
                printf("\n Hotnor:\n - Tudo bem, entao. Se precisar de algo me avisa.\n  ");
                ProcurarSozinho();
                break;

            default:
                system("cls");
                }
               if( respInt2 == 2 || respInt2 == 1){break;}
            usleep(s); usleep(s);




    }

    }
}

int AttackSystem (int x){

    switch(x){
        case 1:
            return 1;
            break;
        case 2:
            return 2;
            break;

        case 3:
            return 3;
            break;
        case 4:
            return 4;
            break;
        default:
            return 0;
            break;
    }
}

char RespostaLetra(char resp){

    switch(resp){
    case('Y'):
    case('y'):
    case('S'):
    case('s'):
    return 1;
    break;

    default:
    return 0;
    }
}

char Name(void){
    char resp;

    printf("  A LENDA\n\n");
    printf("\n 1 - Sinais\n\n");

    while(1){

        //CHECAR O NOME-----------------------------------------------------------------------------------------------------------------
        printf("\n Qual o seu nome?\n  ");
        fflush(stdin);
        scanf("%s", &Nome);

        printf("\n %s eh mesmo o teu nome?\n  ");
        fflush(stdin);
        scanf("%c", &resp);

        system("cls");
        usleep(s); usleep(s); usleep(s);
        if(RespostaLetra(resp)){
            printf("\n\t\t\t\tThe Legend Of %s\n", Nome);
            break;
        }
    }
}

int RespostaNumero(int resp){

    if(resp==1){
        return 1;
    }
    if(resp==2){
        return 0;
    }
  }

int quadResposta(int resp){

    switch(resp){
        case 1:
            return 1;
            break;
        case 2:
            return 2;
            break;
        case 3:
            return 3;
            break;
        case 4:
            return 4;
            break;
        default:
            break;

    }

}

void Lot1 (void){
            printf("  O ceu estava cinzento em Hyalton, e Dalia caminhava ao seu lado, segurando os\n livros que se assemelhavam a tijolos.\n"); usleep(s); usleep(s); usleep(s); usleep(s);
        printf(" Voce sente que ela esta cansada, mas ainda assim expressa uma feicao de leveza."); usleep(s); usleep(s); usleep(s); usleep(s);
        printf( "\nOs dois estavam a caminho de casa, passando pela enorme estrutura do Casarao dos Valkron.\n"); usleep(s); usleep(s); usleep(s);
        printf( "\n Naquele momento, sua irma te lanca um olhar e pergunta: \n"); usleep(s); usleep(s); usleep(s); usleep(s);
        printf(" -E entao, ja esta com muita ansiedade para o festival? \n\n"); usleep(s); usleep(s); usleep(s);

        printf(" 1 - Claro.\n 2 - Nem tanto.\n ? - ...\n  ");
        fflush(stdin);
}

void Lot2 (void){
    puts("   --- * --- * --- * --- * --- * --- * --- * --- * --- * --- * --- * ---* ---");    //--------------//
    puts("\n\n\n\n\n\n");                                                                     //              //
    puts("\t\t(Pressione qualquer tecla para continuar...)");                                 //   FINAL DE   //
    fflush(stdin);                                                                            //     SEÇÃO    //
    getch(); system("cls");                                                                   //              //
    usleep(s); usleep(s); usleep(s);                                                          //--------------//
}

void Lot3 (void){
        printf("\n Chegando em casa, voce se depara com Hanne, sua mae, que esta cuidando de uma\n "); usleep(s); usleep(s);
        printf("pequena plantacao ao lado de sua casa.\n"); usleep(s); usleep(s);
        printf("\n Hanne:\n - Dalia, venha me ajudar!\n"); usleep(s); usleep(s);
        printf("\n E entao voce ouve um grito...\n ");usleep(s);
        printf(" %c%s, venha aqui!%c\n", aspas, Nome, aspas);usleep(s);usleep(s);
        printf("\n Era Setvik, seu pai.\n");usleep(s);usleep(s);
        printf(" 1 - Ir ate ele\n 2 - Ignorar\n ? - ...\n  ");
}

void Lot4 (void){
                printf(" Va em busca de seu irmao que esta com os filhos dos Hotnor na feira.\n");

                  puts("   --- * --- * --- * --- * --- * --- * --- * --- * --- * --- * --- * ---* ---");    //--------------//
                  puts("\n\n\n\n\n\n");                                                                     //              //
                  puts("\t\t(Pressione qualquer tecla para continuar...)");                                 //   FINAL DE   //
                  fflush(stdin);                                                                            //     SEÇÃO    //
                  getch(); system("cls");                                                                   //              //
                  usleep(s); usleep(s); usleep(s);                                                          //--------------//
                  fflush(stdin);
}

void Lot5 (void){
                usleep(s); usleep(s); usleep(s); usleep(s);
                printf("\n Chegando na feira voce percebe que ela esta sendo decorada por varias pessoas.\n"); usleep(s); usleep(s);
                printf(" Ha enfeites  por todas as partes para preparacao do festival.\n"); usleep(s); usleep(s);
                printf("\n Voce se aproxima de Hotnor, um dos mercadores da feira. \n"); usleep(s); usleep(s);
                printf(" Hotnor e pai de Otskel, amigo de Yurin, seu irmao.  \n"); usleep(s); usleep(s);

                printf("\n Hotnor:\n - Ola, %s, quer alguma coisa?\n\n", Nome); usleep(s); usleep(s);
                printf(" 1 - Sim\n 2 - Nao\n ? - ...\n  ");
                        fflush(stdin);
}

void ProcurarSozinho(){
char x = '0';
int d;
system("cls");
printf("\n Ao ir para praca voce avistou Asha e Pascal. Os dois ajudavam a decorar\n a praca");usleep(s); usleep(s);
printf(" com enfeites coloridos nos postes e casas. Ahnmeri, Sammuel e\n Nyara Valkron");usleep(s); usleep(s);
printf(" observavam tudo com um olhar desmotivado, sob os olhares\n de Treviss Valkron e Eileen Valkron, lordes de Hyalton.\n");usleep(s); usleep(s);
printf(" Voce pensa em ir cumprimentar os amigos do instrucionario, mas percebe\n que suas roupas nao estao %ca carater%c para a presenca dos Valkron.", aspas, aspas);
usleep(s); usleep(s);

        while(x != '1'||x != '2'){
        system("cls");
        printf("\n Ao ir para praca voce avistou Asha e Pascal. Os dois ajudavam a decorar\n a praca");
        printf(" com enfeites coloridos nos postes e casas. Ahnmeri, Sammuel e\n Nyara Valkron");
        printf(" observavam tudo com um olhar desmotivado, sob os olhares\n de Treviss Valkron e Eileen Valkron, lordes de Hyalton.\n");
        printf(" Voce pensa em ir cumprimentar os amigos do instrucionario, mas percebe\n que suas roupas nao estao %ca carater%c para a presenca dos Valkron.", aspas, aspas);
        printf("\n\n 1 - Ir mesmo assim\n 2 - Voltar para casa sem o irmao\n  ");
        fflush(stdin);
        scanf("%c", &x);
        if(x=='1'|| x=='2'){break;}
        }

        switch(x){
        case '1':
            system("cls");
            usleep(s); usleep(s);
            printf("\n Os Valkron se afastam na mesma hora pra olhar outra coisa e nem o percebem la. ");
            printf(" Em seguida, Asha o abraca e Pascal iria cumprimenta-lo se nao estivesse sujo de tinta azul e branca.");usleep(s); usleep(s);
            printf("\n Pascal:\n -  Veio ajudar so pra receber comida depois ne?");usleep(s); usleep(s);
            printf("\n\n 1 - Nao, to procurando por Otskel e Yurin, sabe onde estao?\n 2 - Claro.\n ? - Claro.\n  ");

             fflush(stdin);
             scanf("%d", &d);

                switch(d){
            case 1:
                system("cls");
                printf("\n Pascal:\n -  Ah, eu vi os dois. Eles foram com a Tritska la para o Rio Vermelho.\n");usleep(s); usleep(s);
                avisar = 0;
                Lot2();
                RioVermelho();
                break;

            case 2:
            default:
                system("cls");
                usleep(s); usleep(s);
                printf("\n\n %s:\n -  Claro, nao e por isso que voce ta aqui tambem?", Nome);usleep(s); usleep(s);
                printf("\n\n Pascal soltou uma risada e quase caiu da escada na qual estava suspenso.");usleep(s); usleep(s);
                printf("\n\n Asha:\n - Voce viu a Tritska? Ela saiu com o Yurin essa tarde pra o Rio Vermelho,\n mas ainda nao voltou.");usleep(s); usleep(s);
                printf("\n\n 1 - Nao. \n ? - Nao.\n  ");usleep(s); usleep(s);
                scanf("%*d");
                system("cls");
                printf("\n\n %s:\n - Ah, nao. Na verdade estou procurando por eles.", Nome);usleep(s); usleep(s);
                printf("\n\n Asha:\n - Quando os encontrar, avisa a Tritska que ja passou da hora de ir pra casa.\n");usleep(s); usleep(s);
                avisar = 1;
                Lot2();
                RioVermelho();

                }

            break;
        case '2':
            system("cls");
            usleep(s); usleep(s);usleep(s); usleep(s);
            printf("\n Ao chegar em casa voce descobre que seu irmao ja estava em casa.");usleep(s); usleep(s);
            printf("\n Ele estava com roupas molhadas e com o joelho sangrando.\n\n");usleep(s); usleep(s);
            NaoBuscouIrmao++;
            Lot2();

            break;
        default:
            puts("Cc");

        }
}

void RioVermelho(){
printf("\n *----------------------------------------------------* \n");
printf("\n\t Voce foi para o Rio Vermelho\n\t e levou seu irmao para casa.\n");
printf("\n *----------------------------------------------------* \n");
Lot2();
}
int main(){

    char NomePrevio[10];
    char resp;
    int respInt,respInt2, hp, hpDalia, hpHanne, hpSetvik, hpYurin, i, respPrimeiraPergunta;
    void delay(unsigned int);

        Name(); // Função da Escolha do Nome do Personagem.

        //COMEÇO DO JOGO--------------------------------------------------------------------------------------------------------------

        Lot1(); //Função do 1º Lot de Texto.
             fflush(stdin);
            scanf("%d", &respPrimeiraPergunta);
            system("cls");
            usleep(s); usleep(s);

            SW1 (respPrimeiraPergunta);

        Lot2(); //Função do 2º Lot de Texto.

        //AO CHEGAR EM CASA-------------------------------------------------------------------------------------
            usleep(s); usleep(s); usleep(s); usleep(s);

        Lot3();
        //FINAL DE SEÇÃO----------------------------------------------------------------------------------------
            fflush(stdin);
            scanf("%d", &respInt);
            system("cls");
            usleep(s); usleep(s);

        SW2(respInt);

        Lot4();


        //NA FEIRA-------------------------------------------------------------------------------------

         Lot5();
            fflush(stdin);
            scanf("%d", &respInt);
            system("cls");
            usleep(s); usleep(s);
            SW3(respInt);
           // scanf("%d", &respInt);
         EndChap1();


return 0;
}
